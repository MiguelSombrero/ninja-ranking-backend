(this["webpackJsonpninja-ranking-frontend-react"]=this["webpackJsonpninja-ranking-frontend-react"]||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),l=a.n(c),u=a(11),o=a(30),s=a(10),i=a(5),m=a.n(i),p=a(8),f=a(9),E=a(38),d=a.n(E),b=null,h=function(e){b="bearer ".concat(e)},v=function(e){var t=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:b}},t.next=3,d.a.post(e,a,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post(e,a);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{create:a,getAll:t,update:function(){var t=Object(p.a)(m.a.mark((function t(a,n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:b}},t.next=3,d.a.put("".concat(e,"/").concat(a),n,r);case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),login:n}},g=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(n.useState)(""),l=Object(f.a)(c,2),u=l[0],o=l[1],s=Object(n.useState)(""),i=Object(f.a)(s,2),m=i[0],p=i[1],E=function(e){o(e.target.value)},d=function(){p("field must be within "+t+"-"+a+" characters")};return[{type:e,minLength:t,maxLength:a,required:r,value:u,onChange:E,onInvalid:d},m,o]},y=v("/api/login"),O=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.login(e);case 2:n=t.sent,window.localStorage.setItem("loggedNinjaRankingUser",JSON.stringify(n)),h(n.token),a({type:"LOGIN",user:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;default:return e}},k=a(14),w=v("/api/tournaments"),x=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.create(e);case 2:n=t.sent,a({type:"CREATE_TOURNAMENT",newTournament:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.update(e.id,e);case 2:n=t.sent,a(T(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return{type:"UPDATE_TOURNAMENT",updatedTournament:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOURNAMENTS":return t.tournaments;case"CREATE_TOURNAMENT":return[].concat(Object(k.a)(e),[t.newTournament]);case"UPDATE_TOURNAMENT":return e.map((function(e){return e.id===t.updatedTournament.id?t.updatedTournament:e}));default:return e}},L=v("/api/players"),S=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.create(e);case 2:n=t.sent,a({type:"CREATE_PLAYER",newPlayer:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return{type:"UPDATE_PLAYER",updatedPlayer:e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLAYERS":return t.players;case"CREATE_PLAYER":return[].concat(Object(k.a)(e),[t.newPlayer]);case"UPDATE_PLAYER":return e.map((function(e){return e.id===t.updatedPlayer.id?t.updatedPlayer:e}));default:return e}},_=a(113),G=a(109),P=a(116),U=a(69),F=a(117),M=a(27),I=function(e){var t=e.user,a=Object(s.b)();return r.a.createElement(G.a,{id:"top"},r.a.createElement(P.a,{as:U.a,collapseOnSelect:!0,expand:"lg",style:{backgroundColor:"rgb(252, 156, 217)"}},r.a.createElement(P.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(P.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(F.a,{className:"mr-auto"},r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/"},r.a.createElement(M.b,null)))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{className:"justify-content-center mr-auto"},r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/tournaments"},"Manage tournaments")),r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/tournament"},"Create new tournament"))),r.a.createElement(F.a,null,r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/",onClick:function(){try{a(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedNinjaRankingUser"),h(null),t({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){console.log("logout failed, bollocks",e)}}},"Logout")))),!t&&r.a.createElement(F.a,null,r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(o.HashLink,{smooth:!0,to:"/#loginform"},"Login")),r.a.createElement(F.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/register"},"Create account"))))))},V=function(){return r.a.createElement(G.a,{className:"ninja-banner mt-5"},r.a.createElement(U.a,{xs:12,md:12,className:"mt-4"},r.a.createElement(F.a,{className:"justify-content-center"},r.a.createElement(F.a.Link,{as:"span"},r.a.createElement(o.HashLink,{smooth:!0,to:"/#top"},r.a.createElement(M.b,null))),r.a.createElement(F.a.Link,{href:"https://github.com/MiguelSombrero/ninja-ranking-react"},r.a.createElement(M.c,null)),r.a.createElement(F.a.Link,{as:"span"},r.a.createElement(u.NavLink,{to:"/about"},r.a.createElement(M.d,null))))),r.a.createElement(U.a,{xs:12,md:12,className:"mt-4"},r.a.createElement("p",null,"\xa9 Miika Somero 2020")))},Y=a(28),D=a(111),B=a(115),H=function(e){var t=e.text,a=e.type,n=void 0===a?"submit":a,c=e.onClick;return r.a.createElement("input",{className:"ninja-button",type:n,value:t,onClick:c})},z=Object(Y.o)((function(e){var t=Object(s.b)(),a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],o=c[1],i=g("text",5,20,!0),E=Object(f.a)(i,2),d=E[0],b=E[1],h=g("password",5,20,!0),v=Object(f.a)(h,2),y=v[0],j=v[1],k=function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return o(!0),a.abrupt("return");case 4:try{t(O({username:d.value,password:y.value})),e.history.push("/")}catch(r){console.log("Login failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(G.a,{id:"loginform"},r.a.createElement(U.a,{className:"form"},r.a.createElement("h2",{className:"text-center mt-4"},"Login to Ninja Ranking"),r.a.createElement(B.a,{noValidate:!0,validated:l,onSubmit:k},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Username"),r.a.createElement(B.a.Control,Object.assign({},d,{placeholder:"Username"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},b)),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Password"),r.a.createElement(B.a.Control,Object.assign({},y,{placeholder:"Password"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},j)),r.a.createElement(H,{text:"Login"}),r.a.createElement(B.a.Row,null,r.a.createElement(U.a,{xs:12,md:6},r.a.createElement("small",{className:"float-left"},r.a.createElement(u.Link,{to:"/register"}," Not yet a member?"))),r.a.createElement(U.a,{xs:12,md:6},r.a.createElement("small",{className:"float-right"},r.a.createElement(u.Link,{to:"/register"}," Forgot your password?")))))))})),J=a(110),W=function(e){var t=e.text,a=e.type,n=void 0===a?"banner":a;return r.a.createElement(G.a,null,r.a.createElement(J.a,{as:U.a,fluid:!0,className:"banner"===n?"ninja-banner":"ninja-description"},r.a.createElement("h1",null,t)))},q=a(72),K=a.n(q),Q=function(e){var t=e.tournament;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{style:{borderTop:"1px solid lightgrey"}},r.a.createElement(U.a,null,r.a.createElement(u.NavLink,{to:"/tournaments/".concat(t.id)},r.a.createElement("h2",null,t.name)))),r.a.createElement(G.a,null,r.a.createElement(U.a,{xs:12,sm:6},r.a.createElement("h6",{className:"text-muted"},"Created on ",K()(t.created).format("MMMM Do YYYY"),","),r.a.createElement("h6",{className:"text-muted"},"by ",t.account.name)),r.a.createElement(U.a,{xs:12,sm:6},r.a.createElement("h6",{className:"float-right",style:{color:t.active?"green":"red"}},t.active?"active":"inactive"))))},X=function(e){var t=e.user,a=e.tournaments.filter((function(e){return e.active}));return r.a.createElement(G.a,{className:"justify-content-center"},r.a.createElement(D.a,{fluid:!0,src:"/ninja_ranking_banner.jpg",style:{width:"100%",height:"auto"}}),!t&&r.a.createElement(z,null),t&&r.a.createElement(U.a,null,r.a.createElement(W,{text:"Welcome back ".concat(t.name)}),r.a.createElement("h3",{className:"text-center"},"Here is some recent tournaments to check:"),r.a.createElement(G.a,{className:"justify-content-center"},r.a.createElement(U.a,{xs:12,sm:6,className:"mt-4"},a.map((function(e){return r.a.createElement(Q,{key:e.id,tournament:e})}))))))},Z=v("/api/accounts"),$=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.create(e);case 2:n=t.sent,a({type:"REGISTER_ACCOUNT",newAccount:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_ACCOUNT":return[].concat(Object(k.a)(e),[t.newAccount]);default:return e}},te=Object(Y.o)((function(e){var t=Object(s.b)(),a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],u=c[1],o=g("text",5,20,!0),i=Object(f.a)(o,2),E=i[0],d=i[1],b=g("password",5,20,!0),h=Object(f.a)(b,2),v=h[0],y=h[1],O=g("text",1,20,!0),j=Object(f.a)(O,2),k=j[0],w=j[1],x=function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t($({username:E.value,password:v.value,name:k.value})),e.history.push("/login")}catch(r){console.log("Oooops from register form",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{text:"Create new Ninja Account"}),r.a.createElement(G.a,null,r.a.createElement(U.a,{className:"form"},r.a.createElement(B.a,{noValidate:!0,validated:l,onSubmit:x},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Name"),r.a.createElement(B.a.Control,Object.assign({},k,{placeholder:"Name"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},w)),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Username"),r.a.createElement(B.a.Control,Object.assign({},E,{placeholder:"Username"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Password"),r.a.createElement(B.a.Control,Object.assign({},v,{placeholder:"Password"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},y)),r.a.createElement(H,{text:"Register"})))))})),ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{text:"Ninja Ranking app"}),r.a.createElement(G.a,null,r.a.createElement(U.a,{className:"text-center form"},r.a.createElement("p",null,"Ninja Ranking is a web application for keeping track of",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/American_Ninja_Warrior"}," Ninja Warrior")," tournaments."),r.a.createElement("p",null,"You can create Ninja Warrior tournament, add players and obstacles to it, and compete with each other. This app keeps track of players performances and shows some data etc."))))},ne=Object(Y.o)((function(e){var t=Object(s.b)(),a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],u=c[1],o=g("text",1,50,!0),i=Object(f.a)(o,2),E=i[0],d=i[1],b=function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t(x({name:E.value})),e.history.push("/tournaments")}catch(r){console.log("Creation of a tournament failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{text:"Create Ninja Tournament"}),r.a.createElement(G.a,null,r.a.createElement(U.a,{className:"form"},r.a.createElement(B.a,{noValidate:!0,validated:l,onSubmit:b},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Name of the Tournament"),r.a.createElement(B.a.Control,Object.assign({},E,{placeholder:"Name"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(H,{text:"Create tournament"})))))})),re=function(e){var t=e.tournaments,a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],u=c[1];if(!t)return null;var o=t.filter((function(e){return e.active})),s=t.filter((function(e){return!e.active})),i=function(e){return r.a.createElement(U.a,{xs:12,sm:6},e.map((function(e){return r.a.createElement(Q,{key:e.id,tournament:e})})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{text:"Your tournaments"}),r.a.createElement(G.a,{className:"justify-content-center"},i(o)),r.a.createElement(G.a,{className:"justify-content-center mt-4"},l?i(s):r.a.createElement(U.a,{xs:12,sm:6},r.a.createElement(H,{text:"Show past tournaments",onClick:function(){return u(!0)}}))))},ce=a(33),le=a(118),ue=v("/api/obstacles"),oe=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.create(e);case 2:return n=t.sent,a({type:"CREATE_OBSTACLE",newObstacle:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_OBSTACLES":return t.obstacles;case"CREATE_OBSTACLE":return[].concat(Object(k.a)(e),[t.newObstacle]);default:return e}},ie=Object(Y.o)((function(e){var t=e.tournament,a=Object(s.b)(),c=Object(n.useState)(!1),l=Object(f.a)(c,2),u=l[0],o=l[1],i=g("text",1,20,!0),E=Object(f.a)(i,3),d=E[0],b=E[1],h=E[2],v=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.target.checkValidity()){e.next=4;break}return o(!0),e.abrupt("return");case 4:return e.prev=4,e.next=7,a(oe({name:d.value,tournament_id:t.id}));case 7:r=e.sent,c=Object(ce.a)({},t,{obstacles:[].concat(Object(k.a)(t.obstacles),[r])}),a(T(c)),h(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("Creation of a obstacle failed",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(B.a,{noValidate:!0,validated:u,onSubmit:v},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Obstacle name"),r.a.createElement(B.a.Control,Object.assign({},d,{placeholder:"Name"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},b)),r.a.createElement(H,{text:"New obstacle"}))})),me=function(e){var t=Object(s.b)(),a=Object(n.useState)(!1),c=Object(f.a)(a,2),l=c[0],u=c[1],o=g("text",1,50,!0),i=Object(f.a)(o,3),E=i[0],d=i[1],b=i[2],h=function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t(S({nickname:E.value,tournament_id:e.tournament.id})),b("")}catch(r){console.log("Creation of a player failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(B.a,{noValidate:!0,validated:l,onSubmit:h},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Player name"),r.a.createElement(B.a.Control,Object.assign({},E,{placeholder:"Name"})),r.a.createElement(B.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(H,{text:"New player"}))},pe=function(e){var t=e.tournament,a=e.handleShowAddResult,n=e.handleEndTournament;return r.a.createElement(F.a,{className:"flex-column"},r.a.createElement(ie,{tournament:t}),r.a.createElement(me,{tournament:t}),r.a.createElement(H,{text:"Add result",onClick:a}),r.a.createElement(H,{text:"End tournament",onClick:n}))},fe=a(112),Ee=a(52),de=function(e){var t=e.result,a=e.obstacles;return r.a.createElement("tr",null,r.a.createElement("td",null,t.nickname),a.map((function(e){return r.a.createElement("td",{key:e.id},function(e,t){return e.passed_obstacles.includes(t.id)}(t,e)?r.a.createElement(Ee.a,{color:"green"}):r.a.createElement(Ee.b,{color:"red"}))})),r.a.createElement("td",null,t.passed_obstacles.length),r.a.createElement("td",null,t.time),r.a.createElement("td",null,t.not_passed))},be=function(e){var t=e.results,a=e.obstacles,n=e.passedRatio;return r.a.createElement("tr",null,r.a.createElement("th",null,"Obstacle pass ratio"),a.map((function(e){return r.a.createElement("th",{key:e.id},0===t.length?0:n(e))})),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))},he=function(e){var t=e.obstacles,a=e.players.map((function(e){return e.results.map((function(t){return Object.assign(t,{nickname:e.nickname})}))})).flat(),n=function(e,t){return e.passed_obstacles.includes(t.id)},c=function(e){return a.filter((function(t){return n(t,e)})).length},l=function(e){return t.filter((function(t){return!n(e,t)})).reduce((function(e,t){return e+a.length-c(t)}),0)},u=a.map((function(e){return Object.assign(e,{not_passed:l(e)})})).sort(function(e,t){return e.time>t.time?1:-1}&&function(e,t){return e.passed_obstacles.length>t.passed_obstacles.length?-1:1}&&function(e,t){return e.not_passed>t.not_passed?1:-1});return r.a.createElement(G.a,null,r.a.createElement(U.a,null,r.a.createElement(fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),t.map((function(e){return r.a.createElement("th",{key:e.id},e.name)})),r.a.createElement("th",null,"Passed count"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Not passed"))),r.a.createElement("tbody",null,u.map((function(e){return r.a.createElement(de,{key:e.id,result:e,obstacles:t})}))),r.a.createElement("thead",null,r.a.createElement(be,{results:u,obstacles:t,passedRatio:function(e){return Math.round(c(e)/a.length*100)/100}})))))},ve=Object(Y.o)((function(e){var t=e.tournament,a=e.history,n=e.players,c=e.handleShowAddResult,l=e.user,u=Object(s.b)();if(!t)return null;var o=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(ce.a)({},t,{active:!1}),e.next=4,u(N(n));case 4:a.push("/tournaments"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=0===t.obstacles.length?function(){return"no obstacles"}:function(){return t.obstacles.map((function(e){return r.a.createElement(le.a.Item,{key:e.id},e.name)}))},f=0===n.length?function(){return"no players"}:function(){return n.map((function(e){return r.a.createElement(le.a.Item,{key:e.id},e.nickname)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{text:t.name}),r.a.createElement(G.a,null,t.active&&l.id===t.account.id&&r.a.createElement(U.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement(pe,{tournament:t,handleShowAddResult:c,handleEndTournament:o})),r.a.createElement(U.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement("h4",null,"Obstacles"),r.a.createElement(le.a,{variant:"flush"},i())),r.a.createElement(U.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement("h4",null,"Players"),r.a.createElement(le.a,{variant:"flush"},f()))),r.a.createElement(W,{text:"Results",type:"description"}),r.a.createElement(he,{obstacles:t.obstacles,players:n}))})),ge=a(114),ye=v("/api/results"),Oe=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye.create(e);case 2:return n=t.sent,a({type:"CREATE_RESULT",newResult:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RESULTS":return t.results;case"CREATE_RESULT":return[].concat(Object(k.a)(e),[t.newResult]);default:return e}},ke=function(e){var t=e.show,a=e.close,c=e.players,l=e.obstacles,u=Object(n.useState)(!1),o=Object(f.a)(u,2),i=o[0],E=o[1],d=Object(n.useState)(null),b=Object(f.a)(d,2),h=b[0],v=b[1],g=Object(n.useState)(0),y=Object(f.a)(g,2),O=y[0],j=y[1],w=Object(n.useState)([]),x=Object(f.a)(w,2),N=x[0],T=x[1],C=Object(s.b)(),L=function(e){return N.includes(e)},S=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,r,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.checkValidity()){e.next=4;break}return E(!0),e.abrupt("return");case 4:return n=h||c[0],r={player_id:n.id,time:O,passed_obstacles:N},e.prev=6,e.next=9,C(Oe(r));case 9:l=e.sent,u=Object(ce.a)({},n,{results:[].concat(Object(k.a)(n.results),[l])}),C(R(u)),j(0),v(null),T([]),a(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ge.a,{show:t,onHide:a,centered:!0},r.a.createElement(ge.a.Header,{closeButton:!0},r.a.createElement(ge.a.Title,null,"Add result for player")),r.a.createElement(ge.a.Body,null,r.a.createElement(B.a,{noValidate:!0,validated:i,onSubmit:S},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Select player"),r.a.createElement(B.a.Row,null,r.a.createElement("select",{id:"players",onChange:function(e){v(c.find((function(t){return t.nickname===e.target.value})))}},c.map((function(e){return r.a.createElement("option",{key:e.id},e.nickname)}))))),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Label,null,"Time"),r.a.createElement(B.a.Control,{type:"number",onChange:function(e){j(e.target.value)},placeholder:"Time"})),r.a.createElement(B.a.Label,null,"Select passed obstacles"),l.map((function(e){return r.a.createElement(B.a.Group,{key:e.id},r.a.createElement(B.a.Check,{type:"checkbox",label:e.name,checked:L(e.id),onChange:function(){return L(e.id)?(t=e.id,T(N.filter((function(e){return e!==Number(t)})))):function(e){return T([].concat(Object(k.a)(N),[e]))}(e.id);var t}}))})),r.a.createElement(B.a.Row,null,r.a.createElement(U.a,null,r.a.createElement(H,{text:"Save result"})),r.a.createElement(U.a,null,r.a.createElement(H,{text:"Cancel",type:"button",onClick:a}))))))},we=function(e){var t=e.tournaments,a=e.user,c=Object(n.useState)(!1),l=Object(f.a)(c,2),u=l[0],o=l[1],i=Object(Y.m)().id,m=Object(s.c)((function(e){return e.players.filter((function(e){return e.tournament_id===Number(i)}))})),p=t.find((function(e){return e.id===Number(i)}));return p?r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,{tournament:p,players:m,handleShowAddResult:function(){return o(!0)},user:a}),r.a.createElement(ke,{players:m,obstacles:p.obstacles,show:u,close:function(){return o(!1)}})):null},xe=function(e){var t=e.user,a=e.tournaments,n=t&&a.filter((function(e){return e.account.id===t.id}));return r.a.createElement(Y.g,null,r.a.createElement(Y.d,{path:"/about"},r.a.createElement(ae,null)),r.a.createElement(Y.d,{path:"/register"},r.a.createElement(te,null)),t&&r.a.createElement(Y.d,{path:"/tournaments/:id"},r.a.createElement(we,{tournaments:a,user:t})),t&&r.a.createElement(Y.d,{path:"/tournaments"},r.a.createElement(re,{tournaments:n})),t&&r.a.createElement(Y.d,{path:"/tournament"},r.a.createElement(ne,null)),r.a.createElement(Y.d,{exact:!0,path:"/"},r.a.createElement(X,{user:t,tournaments:a})))},Ne=(a(105),function(){var e=Object(s.b)();Object(n.useEffect)((function(){var t,a=window.localStorage.getItem("loggedNinjaRankingUser");a&&e((t=JSON.parse(a),function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.token),a({type:"LOGIN",user:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),Object(n.useEffect)((function(){e(function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:a=e.sent,t({type:"GET_TOURNAMENTS",tournaments:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){e(function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:a=e.sent,t({type:"GET_PLAYERS",players:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var t=Object(s.c)((function(e){return e.user})),a=Object(s.c)((function(e){return e.tournaments}));return r.a.createElement(_.a,{fluid:!0},r.a.createElement(u.BrowserRouter,null,r.a.createElement(I,{user:t}),r.a.createElement(xe,{user:t,tournaments:a}),r.a.createElement(o.HashLink,{smooth:!0,to:"#top"},r.a.createElement(M.a,{style:{position:"fixed",bottom:"30px",right:"30px",zIndex:"9999"}})),r.a.createElement(V,null)))}),Te=a(34),Ce=a(74),Le=Object(Te.c)({user:j,accounts:ee,tournaments:C,obstacles:se,players:A,results:je}),Se=Object(Te.d)(Le,Object(Te.a)(Ce.a)),Re=a(0);a(106);l.a.render(r.a.createElement(Re.b.Provider,{value:{size:"2.5rem",color:"rgb(54, 51, 124)"}},r.a.createElement(s.a,{store:Se},r.a.createElement(Ne,null))),document.getElementById("root"))},75:function(e,t,a){e.exports=a(107)}},[[75,1,2]]]);
//# sourceMappingURL=main.36707fd7.chunk.js.map