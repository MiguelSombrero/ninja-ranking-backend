(this["webpackJsonpninja-ranking-frontend-react"]=this["webpackJsonpninja-ranking-frontend-react"]||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),l=a.n(c),u=a(11),o=a(28),s=a(30),i=a(10),m=a(5),p=a.n(m),f=a(8),E=a(9),d=a(38),b=a.n(d),h=null,v=function(e){h="bearer ".concat(e)},y=function(e){var t=function(){var t=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:h}},t.next=3,b.a.post(e,a,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post(e,a);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{create:a,getAll:t,update:function(){var t=Object(f.a)(p.a.mark((function t(a,n){var r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:h}},t.next=3,b.a.put("".concat(e,"/").concat(a),n,r);case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),login:n}},O=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(n.useState)(""),l=Object(E.a)(c,2),u=l[0],o=l[1],s=Object(n.useState)(""),i=Object(E.a)(s,2),m=i[0],p=i[1],f=function(e){o(e.target.value)},d=function(){p("field must be within "+t+"-"+a+" characters")};return[{type:e,minLength:t,maxLength:a,required:r,value:u,onChange:f,onInvalid:d},m,o]},j=y("/api/login"),g=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.login(e);case 2:n=t.sent,window.localStorage.setItem("loggedNinjaRankingUser",JSON.stringify(n)),v(n.token),a({type:"LOGIN",user:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;default:return e}},w=a(14),x=y("/api/tournaments"),N=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.create(e);case 2:n=t.sent,a({type:"CREATE_TOURNAMENT",newTournament:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.update(e.id,e);case 2:n=t.sent,a(C(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return{type:"UPDATE_TOURNAMENT",updatedTournament:e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOURNAMENTS":return t.tournaments;case"CREATE_TOURNAMENT":return[].concat(Object(w.a)(e),[t.newTournament]);case"UPDATE_TOURNAMENT":return e.map((function(e){return e.id===t.updatedTournament.id?t.updatedTournament:e}));default:return e}},S=y("/api/players"),A=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.create(e);case 2:n=t.sent,a({type:"CREATE_PLAYER",newPlayer:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return{type:"UPDATE_PLAYER",updatedPlayer:e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLAYERS":return t.players;case"CREATE_PLAYER":return[].concat(Object(w.a)(e),[t.newPlayer]);case"UPDATE_PLAYER":return e.map((function(e){return e.id===t.updatedPlayer.id?t.updatedPlayer:e}));default:return e}},G=a(113),U=a(109),P=a(116),F=a(69),M=a(117),I=a(27),V=Object(o.o)((function(e){var t=e.user,a=Object(i.b)();return r.a.createElement(U.a,{id:"top"},r.a.createElement(P.a,{as:F.a,collapseOnSelect:!0,expand:"lg",style:{backgroundColor:"rgb(252, 156, 217)"}},r.a.createElement(P.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(P.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(M.a,{className:"mr-auto"},r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/"},r.a.createElement(I.b,null)))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:"justify-content-center mr-auto"},r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/tournaments"},"Manage tournaments")),r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/tournament"},"Create new tournament"))),r.a.createElement(M.a,null,r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/",onClick:function(){try{a(function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedNinjaRankingUser"),v(null),t({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){console.log("logout failed, bollocks",e)}}},"Logout")))),!t&&r.a.createElement(M.a,null,r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(s.HashLink,{smooth:!0,to:"/#loginform"},"Login")),r.a.createElement(M.a.Link,{href:"#",as:"span"},r.a.createElement(u.NavLink,{to:"/register"},"Create account"))))))})),Y=a(111),D=a(115),B=function(e){var t=e.text,a=e.type,n=void 0===a?"submit":a,c=e.onClick;return r.a.createElement("input",{className:"ninja-button",type:n,value:t,onClick:c})},H=Object(o.o)((function(e){var t=Object(i.b)(),a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],o=c[1],s=O("text",5,20,!0),m=Object(E.a)(s,2),d=m[0],b=m[1],h=O("password",5,20,!0),v=Object(E.a)(h,2),y=v[0],j=v[1],k=function(){var a=Object(f.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return o(!0),a.abrupt("return");case 4:try{t(g({username:d.value,password:y.value})),e.history.push("/")}catch(r){console.log("Login failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(U.a,{id:"loginform"},r.a.createElement(F.a,null,r.a.createElement("h2",{className:"text-center mt-4"},"Login to Ninja Ranking"),r.a.createElement(D.a,{className:"form",noValidate:!0,validated:l,onSubmit:k},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Username"),r.a.createElement(D.a.Control,Object.assign({},d,{placeholder:"Username"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},b)),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Password"),r.a.createElement(D.a.Control,Object.assign({},y,{placeholder:"Password"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},j)),r.a.createElement(B,{text:"Login"}),r.a.createElement(D.a.Row,null,r.a.createElement(F.a,{xs:12,md:6},r.a.createElement("small",{className:"float-left"},r.a.createElement(u.Link,{to:"/register"}," Not yet a member?"))),r.a.createElement(F.a,{xs:12,md:6},r.a.createElement("small",{className:"float-right"},r.a.createElement(u.Link,{to:"/register"}," Forgot your password?")))))))})),z=a(110),J=function(e){var t=e.text,a=e.type,n=void 0===a?"banner":a;return r.a.createElement(U.a,null,r.a.createElement(z.a,{as:F.a,fluid:!0,className:"banner"===n?"ninja-banner":"ninja-description"},r.a.createElement("h1",null,t)))},W=a(72),q=a.n(W),K=function(e){var t=e.tournament;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:{borderTop:"1px solid lightgrey"}},r.a.createElement(F.a,null,r.a.createElement(u.NavLink,{to:"/tournaments/".concat(t.id)},r.a.createElement("h2",null,t.name)))),r.a.createElement(U.a,null,r.a.createElement(F.a,{xs:12,sm:6},r.a.createElement("h6",{className:"text-muted"},"Created on ",q()(t.created).format("MMMM Do YYYY"))),r.a.createElement(F.a,{xs:12,sm:6},r.a.createElement("h6",{className:"float-right",style:{color:t.active?"green":"red"}},t.active?"active":"inactive"))))},Q=function(e){var t=e.user,a=e.tournaments.filter((function(e){return e.active}));return r.a.createElement(U.a,{className:"justify-content-center"},r.a.createElement(Y.a,{fluid:!0,src:"/ninja_ranking_banner.jpg",style:{width:"100%",height:"auto"}}),!t&&r.a.createElement(H,null),t&&r.a.createElement(F.a,null,r.a.createElement(J,{text:"Welcome back ".concat(t.name)}),r.a.createElement(U.a,{className:"justify-content-center"},r.a.createElement("h3",null,"Here is some recent tournaments to check:"),r.a.createElement(F.a,{xs:12,sm:6,className:"mt-4"},a.map((function(e){return r.a.createElement(K,{key:e.id,tournament:e})}))))))},X=y("/api/accounts"),Z=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.create(e);case 2:n=t.sent,a({type:"REGISTER_ACCOUNT",newAccount:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_ACCOUNT":return[].concat(Object(w.a)(e),[t.newAccount]);default:return e}},ee=Object(o.o)((function(e){var t=Object(i.b)(),a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],u=c[1],o=O("text",5,20,!0),s=Object(E.a)(o,2),m=s[0],d=s[1],b=O("password",5,20,!0),h=Object(E.a)(b,2),v=h[0],y=h[1],j=O("text",1,20,!0),g=Object(E.a)(j,2),k=g[0],w=g[1],x=function(){var a=Object(f.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t(Z({username:m.value,password:v.value,name:k.value})),e.history.push("/login")}catch(r){console.log("Oooops from register form",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{text:"Create new Ninja Account"}),r.a.createElement(U.a,null,r.a.createElement(F.a,{className:"form"},r.a.createElement(D.a,{noValidate:!0,validated:l,onSubmit:x},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Name"),r.a.createElement(D.a.Control,Object.assign({},k,{placeholder:"Name"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},w)),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Username"),r.a.createElement(D.a.Control,Object.assign({},m,{placeholder:"Username"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Password"),r.a.createElement(D.a.Control,Object.assign({},v,{placeholder:"Password"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},y)),r.a.createElement(B,{text:"Register"})))))})),te=Object(o.o)((function(e){var t=Object(i.b)(),a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],u=c[1],o=O("text",1,50,!0),s=Object(E.a)(o,2),m=s[0],d=s[1],b=function(){var a=Object(f.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t(N({name:m.value})),e.history.push("/tournaments")}catch(r){console.log("Creation of a tournament failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{text:"Create Ninja Tournament"}),r.a.createElement(U.a,null,r.a.createElement(F.a,{className:"form"},r.a.createElement(D.a,{noValidate:!0,validated:l,onSubmit:b},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Name of the Tournament"),r.a.createElement(D.a.Control,Object.assign({},m,{placeholder:"Name"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(B,{text:"Create tournament"})))))})),ae=function(e){var t=e.tournaments,a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],u=c[1];if(!t)return null;var o=t.filter((function(e){return e.active})),s=t.filter((function(e){return!e.active})),i=function(e){return r.a.createElement(F.a,{xs:12,sm:6},e.map((function(e){return r.a.createElement(K,{key:e.id,tournament:e})})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{text:"Your tournaments"}),r.a.createElement(U.a,{className:"justify-content-center"},i(o)),r.a.createElement(U.a,{className:"justify-content-center mt-4"},l?i(s):r.a.createElement(F.a,{xs:12,sm:6},r.a.createElement(B,{text:"Show past tournaments",onClick:function(){return u(!0)}}))))},ne=function(){return r.a.createElement(U.a,{className:"ninja-banner mt-5"},r.a.createElement(F.a,{xs:12,md:12,className:"mt-4"},r.a.createElement(M.a,{className:"justify-content-center"},r.a.createElement(M.a.Link,{as:"span"},r.a.createElement(s.HashLink,{smooth:!0,to:"/#top"},r.a.createElement(I.b,null))),r.a.createElement(M.a.Link,{href:"https://github.com/MiguelSombrero/ninja-ranking-react"},r.a.createElement(I.c,null)),r.a.createElement(M.a.Link,{as:"span"},r.a.createElement(u.NavLink,{to:"/about"},r.a.createElement(I.d,null))))),r.a.createElement(F.a,{xs:12,md:12,className:"mt-4"},r.a.createElement("p",null,"\xa9 Miika Somero 2020")))},re=a(33),ce=a(118),le=y("/api/obstacles"),ue=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le.create(e);case 2:return n=t.sent,a({type:"CREATE_OBSTACLE",newObstacle:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_OBSTACLES":return t.obstacles;case"CREATE_OBSTACLE":return[].concat(Object(w.a)(e),[t.newObstacle]);default:return e}},se=Object(o.o)((function(e){var t=e.tournament,a=Object(i.b)(),c=Object(n.useState)(!1),l=Object(E.a)(c,2),u=l[0],o=l[1],s=O("text",1,20,!0),m=Object(E.a)(s,3),d=m[0],b=m[1],h=m[2],v=function(){var e=Object(f.a)(p.a.mark((function e(n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.target.checkValidity()){e.next=4;break}return o(!0),e.abrupt("return");case 4:return e.prev=4,e.next=7,a(ue({name:d.value,tournament_id:t.id}));case 7:r=e.sent,c=Object(re.a)({},t,{obstacles:[].concat(Object(w.a)(t.obstacles),[r])}),a(C(c)),h(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("Creation of a obstacle failed",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{noValidate:!0,validated:u,onSubmit:v},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Obstacle name"),r.a.createElement(D.a.Control,Object.assign({},d,{placeholder:"Name"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},b)),r.a.createElement(B,{text:"New obstacle"}))})),ie=function(e){var t=Object(i.b)(),a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],u=c[1],o=O("text",1,50,!0),s=Object(E.a)(o,3),m=s[0],d=s[1],b=s[2],h=function(){var a=Object(f.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.target.checkValidity()){a.next=4;break}return u(!0),a.abrupt("return");case 4:try{t(A({nickname:m.value,tournament_id:e.tournament.id})),b("")}catch(r){console.log("Creation of a player failed",r)}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(D.a,{noValidate:!0,validated:l,onSubmit:h},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Player name"),r.a.createElement(D.a.Control,Object.assign({},m,{placeholder:"Name"})),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},d)),r.a.createElement(B,{text:"New player"}))},me=function(e){var t=e.tournament,a=e.handleShowAddResult,n=e.handleEndTournament;return r.a.createElement(M.a,{className:"flex-column"},r.a.createElement(se,{tournament:t}),r.a.createElement(ie,{tournament:t}),r.a.createElement(B,{text:"Add result",onClick:a}),r.a.createElement(B,{text:"End tournament",onClick:n}))},pe=a(112),fe=a(52),Ee=function(e){var t=e.result,a=e.obstacles;return r.a.createElement("tr",null,r.a.createElement("td",null,t.nickname),a.map((function(e){return r.a.createElement("td",{key:e.id},function(e,t){return e.passed_obstacles.includes(t.id)}(t,e)?r.a.createElement(fe.a,{color:"green"}):r.a.createElement(fe.b,{color:"red"}))})),r.a.createElement("td",null,t.time))},de=function(e){var t=e.results,a=e.obstacles,n=function(e){return Math.round(function(e){return t.filter((function(t){return t.passed_obstacles.includes(e.id)})).length}(e)/t.length*100)/100};return r.a.createElement("tr",null,r.a.createElement("th",null,"Obstacle pass-%"),a.map((function(e){return r.a.createElement("th",{key:e.id},0===t.length?0:n(e))})),r.a.createElement("th",null))},be=function(e){var t=e.obstacles,a=e.players.map((function(e){return e.results.map((function(t){return Object.assign(t,{nickname:e.nickname})}))})).flat().sort(function(e,t){return e.time>t.time?1:-1}&&function(e,t){return e.passed_obstacles.length>t.passed_obstacles.length?-1:1});return r.a.createElement(U.a,null,r.a.createElement(F.a,null,r.a.createElement(pe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),t.map((function(e){return r.a.createElement("th",{key:e.id},e.name)})),r.a.createElement("th",null,"Time"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(Ee,{key:e.id,result:e,obstacles:t})}))),r.a.createElement("thead",null,r.a.createElement(de,{results:a,obstacles:t})))))},he=Object(o.o)((function(e){var t=e.tournament,a=e.history,n=e.players,c=e.handleShowAddResult,l=Object(i.b)();if(!t)return null;var u=function(){var e=Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=Object(re.a)({},t,{active:!1}),l(T(n)),a.push("/tournaments")}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=0===t.obstacles.length?function(){return"no obstacles"}:function(){return t.obstacles.map((function(e){return r.a.createElement(ce.a.Item,{key:e.id},e.name)}))},s=0===n.length?function(){return"no players"}:function(){return n.map((function(e){return r.a.createElement(ce.a.Item,{key:e.id},e.nickname)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{text:t.name}),r.a.createElement(U.a,null,r.a.createElement(F.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement(me,{tournament:t,handleShowAddResult:c,handleEndTournament:u})),r.a.createElement(F.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement("h4",null,"Obstacles"),r.a.createElement(ce.a,{variant:"flush"},o())),r.a.createElement(F.a,{xs:12,sm:{span:3,offset:1}},r.a.createElement("h4",null,"Players"),r.a.createElement(ce.a,{variant:"flush"},s()))),r.a.createElement(J,{text:"Results",type:"description"}),r.a.createElement(be,{obstacles:t.obstacles,players:n}))})),ve=a(114),ye=y("/api/results"),Oe=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye.create(e);case 2:return n=t.sent,a({type:"CREATE_RESULT",newResult:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RESULTS":return t.results;case"CREATE_RESULT":return[].concat(Object(w.a)(e),[t.newResult]);default:return e}},ge=function(e){var t=e.show,a=e.close,c=e.players,l=e.obstacles,u=Object(n.useState)(!1),o=Object(E.a)(u,2),s=o[0],m=o[1],d=Object(n.useState)(null),b=Object(E.a)(d,2),h=b[0],v=b[1],y=Object(n.useState)(0),O=Object(E.a)(y,2),j=O[0],g=O[1],k=Object(n.useState)([]),x=Object(E.a)(k,2),N=x[0],T=x[1],C=Object(i.b)();if(!c)return null;var L=function(e){return N.includes(e)},S=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,r,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.checkValidity()){e.next=4;break}return m(!0),e.abrupt("return");case 4:return n=h||c[0],r={player_id:n.id,time:j,passed_obstacles:N},e.prev=6,e.next=9,C(Oe(r));case 9:l=e.sent,u=Object(re.a)({},n,{results:[].concat(Object(w.a)(n.results),[l])}),C(R(u)),g(0),v(null),T([]),a(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ve.a,{show:t,onHide:a,centered:!0},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"Add result for player")),r.a.createElement(ve.a.Body,null,r.a.createElement(D.a,{noValidate:!0,validated:s,onSubmit:S},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Select player"),r.a.createElement("select",{id:"players",onChange:function(e){v(c.find((function(t){return t.nickname===e.target.value})))}},c.map((function(e){return r.a.createElement("option",{key:e.id},e.nickname)})))),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Time"),r.a.createElement(D.a.Control,{type:"number",onChange:function(e){g(e.target.value)},placeholder:"Time"})),l.map((function(e){return r.a.createElement(D.a.Group,{key:e.id},r.a.createElement(D.a.Check,{type:"checkbox",label:e.name,checked:L(e.id),onChange:function(){return L(e.id)?(t=e.id,T(N.filter((function(e){return e!==Number(t)})))):function(e){return T([].concat(Object(w.a)(N),[e]))}(e.id);var t}}))})),r.a.createElement(D.a.Row,null,r.a.createElement(F.a,null,r.a.createElement(B,{text:"Save result"})),r.a.createElement(F.a,null,r.a.createElement(B,{text:"Cancel",type:"button",onClick:a}))))))},ke=function(e){var t=e.tournaments,a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],u=c[1],s=Object(o.m)().id,m=Object(i.c)((function(e){return e.players.filter((function(e){return e.tournament_id===Number(s)}))})),p=t.find((function(e){return e.id===Number(s)}));return p?r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{tournament:p,players:m,handleShowAddResult:function(){return u(!0)}}),r.a.createElement(ge,{players:m,obstacles:p.obstacles,show:l,close:function(){return u(!1)}})):null},we=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{text:"Ninja Ranking app"}),r.a.createElement(U.a,null,r.a.createElement(F.a,{className:"text-center form"},r.a.createElement("p",null,"Ninja Ranking is a web application for keeping track of",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/American_Ninja_Warrior"}," Ninja Warrior")," tournaments."),r.a.createElement("p",null,"You can create Ninja Warrior tournament, add players and obstacles to it, and compete with each other. This app keeps track of players performances and shows some data etc."))))},xe=(a(105),function(){var e=Object(i.b)();Object(n.useEffect)((function(){var t,a=window.localStorage.getItem("loggedNinjaRankingUser");a&&e((t=JSON.parse(a),function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t.token),a({type:"LOGIN",user:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:a=e.sent,t({type:"GET_TOURNAMENTS",tournaments:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:a=e.sent,t({type:"GET_PLAYERS",players:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var t=Object(i.c)((function(e){return e.user})),a=Object(i.c)((function(e){return e.tournaments})),c=t&&a.filter((function(e){return e.account_id===t.id}));return r.a.createElement(G.a,{fluid:!0},r.a.createElement(u.BrowserRouter,null,r.a.createElement(V,{user:t}),r.a.createElement(o.g,null,r.a.createElement(o.d,{path:"/about"},r.a.createElement(we,null)),r.a.createElement(o.d,{path:"/register"},r.a.createElement(ee,null)),r.a.createElement(o.d,{path:"/tournaments/:id"},r.a.createElement(ke,{tournaments:a})),r.a.createElement(o.d,{path:"/tournaments"},r.a.createElement(ae,{tournaments:c})),r.a.createElement(o.d,{path:"/tournament"},r.a.createElement(te,null)),r.a.createElement(o.d,{path:"/"},r.a.createElement(Q,{user:t,tournaments:a}))),r.a.createElement(s.HashLink,{smooth:!0,to:"#top"},r.a.createElement(I.a,{style:{position:"fixed",bottom:"30px",right:"30px",zIndex:"9999"}})),r.a.createElement(ne,null)))}),Ne=a(34),Te=a(74),Ce=Object(Ne.c)({user:k,accounts:$,tournaments:L,obstacles:oe,players:_,results:je}),Le=Object(Ne.d)(Ce,Object(Ne.a)(Te.a)),Se=a(0);a(106);l.a.render(r.a.createElement(Se.b.Provider,{value:{size:"2.5rem",color:"rgb(54, 51, 124)"}},r.a.createElement(i.a,{store:Le},r.a.createElement(xe,null))),document.getElementById("root"))},75:function(e,t,a){e.exports=a(107)}},[[75,1,2]]]);
//# sourceMappingURL=main.5c30e995.chunk.js.map